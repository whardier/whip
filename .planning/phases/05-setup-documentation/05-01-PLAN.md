---
phase: 05-setup-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
  - pyproject.toml
autonomous: true

must_haves:
  truths:
    - "User can read README and understand what whip does"
    - "User can install dependencies using uv following README instructions"
    - "User can follow macOS Accessibility permission instructions in README"
    - "User can start the server using command from README"
    - "User can find the web interface URL in README"
    - "pyproject.toml lists all required dependencies"
  artifacts:
    - path: "README.md"
      provides: "Project documentation with installation and usage instructions"
      contains:
        - "macOS Accessibility"
        - "uv sync"
        - "uvicorn"
        - "http://localhost:9447"
    - path: "pyproject.toml"
      provides: "Python project configuration with dependencies"
      contains:
        - "fastapi"
        - "uvicorn"
        - "pynput"
  key_links:
    - from: "README.md"
      to: "pyproject.toml"
      via: "installation instructions reference dependencies"
---

<objective>
Create comprehensive README with installation, permissions, and usage instructions.

Purpose: Enable users to install, configure, and run whip without prior knowledge of the codebase.
Output: README.md with complete setup guide, pyproject.toml verified complete.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/whip/permissions.py
@src/whip/main.py
@pyproject.toml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create comprehensive README.md</name>
  <files>README.md</files>
  <action>
Create README.md at project root with the following sections:

1. **Header**: Project name "whip" with brief tagline "Web-based remote control for macOS"

2. **Overview**: 1-2 paragraphs explaining what whip does - relay mouse and keyboard input from any browser to macOS host. Mention use cases (control Mac from phone/tablet, assistive technology).

3. **Requirements**:
   - macOS (Ventura or later recommended, Sequoia 15.0+ has monthly permission reset)
   - Python 3.12+
   - uv package manager

4. **Installation**:
   ```bash
   # Clone the repository
   git clone <repo-url>
   cd whip

   # Install dependencies with uv
   uv sync
   ```

5. **macOS Accessibility Permissions** (CRITICAL section):
   - Explain WHY permissions are needed (pynput controls mouse/keyboard)
   - Step-by-step instructions:
     1. Open System Settings
     2. Go to Privacy & Security -> Accessibility
     3. Click lock icon and authenticate
     4. Enable Terminal (or IDE: VS Code, PyCharm, iTerm2)
   - Add warning about macOS Sequoia 15.0+: permissions reset monthly and after reboot
   - Note: server will start without permissions but control won't work

6. **Running the Server**:
   ```bash
   uv run uvicorn whip.main:app --host 0.0.0.0 --port 9447
   ```
   Explain --host 0.0.0.0 enables LAN access from other devices.

7. **Accessing the Interface**:
   - Local: http://localhost:9447
   - From other devices: http://<your-mac-ip>:9447
   - Tip: Find IP with `ifconfig | grep "inet " | grep -v 127.0.0.1`

8. **How It Works**: Brief technical overview
   - Browser captures mouse/keyboard events
   - Events sent via WebSocket to FastAPI server
   - Server relays to macOS via pynput
   - Full-screen canvas for input capture

9. **Port Number**: Fun fact that 9447 spells WHIP on phone keypad.

Use clean markdown formatting. No emojis. Keep instructions concise and actionable.
  </action>
  <verify>
Test README completeness:
- `grep -q "Accessibility" README.md` (permissions documented)
- `grep -q "uv sync" README.md` (installation documented)
- `grep -q "uvicorn" README.md` (run command documented)
- `grep -q "9447" README.md` (port/URL documented)
- `grep -q "localhost" README.md` (access URL documented)
  </verify>
  <done>
README.md exists with all sections covering SETUP-01 through SETUP-04 requirements. User can follow instructions end-to-end.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify and update pyproject.toml</name>
  <files>pyproject.toml</files>
  <action>
Verify pyproject.toml contains all runtime dependencies:
- fastapi (web framework)
- uvicorn (ASGI server)
- pynput (macOS input control)

Current pyproject.toml already has these. Verify it also has:
- pyobjc-framework-Quartz should NOT be listed (pynput handles this internally)
- websockets is not needed (uvicorn[standard] includes it)

If pyproject.toml is already correct, no changes needed. The current version appears complete.

Only update if something is missing. Do not add unnecessary dependencies.
  </action>
  <verify>
Check dependencies are present:
- `grep -q "fastapi" pyproject.toml`
- `grep -q "uvicorn" pyproject.toml`
- `grep -q "pynput" pyproject.toml`
  </verify>
  <done>
pyproject.toml contains fastapi, uvicorn, and pynput. SETUP-05 requirement satisfied.
  </done>
</task>

</tasks>

<verification>
All SETUP requirements covered:
- SETUP-01: README includes Accessibility permission instructions (Task 1, Section 5)
- SETUP-02: README includes uv installation instructions (Task 1, Section 4)
- SETUP-03: README includes server run command (Task 1, Section 6)
- SETUP-04: README includes web interface URL (Task 1, Section 7)
- SETUP-05: pyproject.toml has dependencies (Task 2)
</verification>

<success_criteria>
1. README.md exists at project root
2. README contains macOS Accessibility permission instructions
3. README contains `uv sync` installation command
4. README contains `uvicorn whip.main:app` run command
5. README contains http://localhost:9447 URL
6. pyproject.toml lists fastapi, uvicorn, pynput dependencies
</success_criteria>

<output>
After completion, create `.planning/phases/05-setup-documentation/05-01-SUMMARY.md`
</output>
